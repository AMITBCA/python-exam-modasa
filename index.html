<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BCA College Modasa | Professional Exam Portal</title>
    
    <!-- External Libraries -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://unpkg.com/lucide@latest"></script>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Plus+Jakarta+Sans:wght@400;700;800&display=swap');
        
        :root { --header-height: 70px; }
        @media (min-width: 768px) { :root { --header-height: 80px; } }

        body { 
            font-family: 'Inter', sans-serif; 
            background-color: #030712; 
            color: #f1f5f9;
            -webkit-font-smoothing: antialiased;
            scroll-padding-top: var(--header-height);
            margin: 0;
            overflow-x: hidden;
        }

        .heading-font { font-family: 'Plus Jakarta Sans', sans-serif; }

        /* Custom Scrollbar */
        .custom-scroll::-webkit-scrollbar { width: 4px; }
        .custom-scroll::-webkit-scrollbar-track { background: #020617; }
        .custom-scroll::-webkit-scrollbar-thumb { background: #334155; border-radius: 10px; }

        .header-glass {
            background: rgba(15, 23, 42, 0.95);
            backdrop-filter: blur(16px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .header-fixed {
            position: fixed;
            top: 0; left: 0; right: 0;
            height: var(--header-height);
            z-index: 100;
        }

        .main-container {
            margin-top: var(--header-height);
            padding-top: 1rem;
            min-height: calc(100vh - var(--header-height));
            position: relative;
            z-index: 10;
        }

        .readable-card {
            background: rgba(23, 31, 48, 0.8);
            border: 1px solid rgba(255, 255, 255, 0.12);
            backdrop-filter: blur(24px);
        }

        .input-field {
            background: rgba(10, 15, 28, 0.9);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: #ffffff;
            transition: all 0.2s ease;
        }
        .input-field:focus {
            border-color: #3b82f6;
            background: rgba(0, 0, 0, 1);
            box-shadow: 0 0 0 4px rgba(59, 130, 246, 0.2);
        }

        .gradient-btn {
            background: linear-gradient(135deg, #2563eb 0%, #1d4ed8 100%);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .no-select { user-select: none; }
        .blob {
            position: absolute; width: 300px; height: 300px;
            background: radial-gradient(circle, rgba(59, 130, 246, 0.08) 0%, transparent 70%);
            border-radius: 50%; z-index: -1; pointer-events: none;
        }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .animate-fade-in { animation: fadeIn 0.4s ease-out forwards; }
    </style>
</head>
<body class="min-h-screen custom-scroll overflow-y-auto relative no-select">
    <div class="blob top-0 left-0"></div>
    <div class="blob bottom-0 right-0"></div>
    <div id="root"></div>

    <script type="text/babel" data-type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-app.js";
        import { getFirestore, collection, doc, setDoc, getDoc, updateDoc, onSnapshot, query, addDoc, getDocs } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-firestore.js";
        import { getAuth, signInAnonymously, onAuthStateChanged, signInWithCustomToken } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-auth.js";

        const { useState, useEffect, useRef } = React;

        // --- Firebase Core Safety (Rule 1 & 3) ---
        let db, auth, appId;
        try {
            const firebaseConfig = typeof __firebase_config !== 'undefined' ? JSON.parse(__firebase_config) : { apiKey: "" };
            const app = initializeApp(firebaseConfig);
            db = getFirestore(app);
            auth = getAuth(app);
            appId = typeof __app_id !== 'undefined' ? __app_id : 'bca-modasa-python-2025';
        } catch (e) {
            console.warn("Cloud infrastructure standby.");
        }

        const QUESTION_POOL = [
            { q: "Who is the primary developer of the Python programming language?", options: ["Guido van Rossum", "Dennis Ritchie", "Bjarne Stroustrup", "James Gosling"], correct: 0 },
            { q: "In which year was Python first released?", options: ["1989", "1991", "1995", "2000"], correct: 1 },
            { q: "Which function is used to display text on the screen?", options: ["output()", "display()", "print()", "write()"], correct: 2 },
            { q: "What is the correct syntax to output 'Hello World' in Python?", options: ["echo 'Hello World'", "print('Hello World')", "printf('Hello World')", "console.log('Hello World')"], correct: 1 },
            { q: "Which function is used to take input from the user?", options: ["get()", "input()", "read()", "scan()"], correct: 1 },
            { q: "What is the default return type of the input() function?", options: ["Integer", "Float", "String", "Boolean"], correct: 2 },
            { q: "How do you create a comment in Python?", options: ["// Comment", "/* Comment */", "# Comment", "-- Comment"], correct: 2 },
            { q: "Which statement is used for decision making?", options: ["if", "for", "while", "else"], correct: 0 },
            { q: "What is the correct way to start an 'if' statement in Python?", options: ["if x > 5 then:", "if x > 5:", "if (x > 5)", "if x > 5 {}"], correct: 1 },
            { q: "Which keyword is used to check another condition if the first 'if' is false?", options: ["else if", "elif", "next if", "elseif"], correct: 1 },
            { q: "How is a code block defined in Python?", options: ["Curly Braces", "Indentation", "Parentheses", "Keywords"], correct: 1 },
            { q: "Which loop is used to iterate over a sequence (like a list)?", options: ["while", "for", "do-while", "foreach"], correct: 1 },
            { q: "Which loop repeats as long as a condition is True?", options: ["for", "while", "until", "repeat"], correct: 1 },
            { q: "What will range(5) produce as the starting value?", options: ["1", "0", "5", "None"], correct: 1 },
            { q: "What is the last value produced by range(5)?", options: ["5", "4", "6", "0"], correct: 1 },
            { q: "Which brackets are used to define a List in Python?", options: ["()", "{}", "[]", "<>"], correct: 2 },
            { q: "Lists in Python are:", options: ["Mutable", "Immutable", "Fixed size", "Constant"], correct: 0 },
            { q: "Which brackets are used to define a Tuple in Python?", options: ["[]", "{}", "()", "||"], correct: 2 },
            { q: "Tuples in Python are:", options: ["Mutable", "Immutable", "Dynamic", "Undefined"], correct: 1 },
            { q: "How do you access the first element of a list named 'my_list'?", options: ["my_list[1]", "my_list[0]", "my_list{0}", "my_list.first()"], correct: 1 },
            { q: "Which method is used to add an item to the end of a list?", options: ["add()", "insert()", "append()", "extend()"], correct: 2 },
            { q: "Which keyword is used to stop a loop immediately?", options: ["exit", "stop", "break", "continue"], correct: 2 },
            { q: "Which keyword skips the current iteration of a loop?", options: ["skip", "pass", "continue", "break"], correct: 2 },
            { q: "Which operator is used for exponentiation (power)?", options: ["^", "*", "**", "^^"], correct: 2 },
            { q: "What will print(10 // 3) output?", options: ["3.33", "3", "3.0", "4"], correct: 1 }
        ];

        const PythonLogo = () => (
            <svg width="32" height="32" viewBox="0 0 110 110" fill="none" xmlns="http://www.w3.org/2000/svg" className="md:w-[42px] md:h-[42px] drop-shadow-[0_0_8px_rgba(55,118,171,0.6)]">
                <path d="M55 3C42.8462 3 32.5385 13.0769 32.5385 25.5385V38.1538H55.4615V41.3846H23.3077C12.0769 41.3846 3 50.4615 3 61.6923V81.3846C3 92.6154 12.0769 101.692 23.3077 101.692H38.5385V86.7692C38.5385 79.8462 43.8462 74.5385 50.7692 74.5385H64.2308C71.1538 74.5385 76.4615 79.8462 76.4615 86.7692V101.692H81.6923C93.9231 101.692 104 91.6154 104 79.1538V66.5385C104 54.0769 93.9231 44 81.6923 44H68.4615V58.9231C68.4615 65.8462 63.1538 71.1538 56.2308 71.1538H42.7692C35.8462 71.1538 30.5385 65.8462 30.5385 58.9231V44H55C67.1538 44 77.4615 33.9231 77.4615 21.4615V8.53846C77.4615 8.53846 76.6154 3 55 3ZM43.3077 13.5385C45.9231 13.5385 48.0769 15.6923 48.0769 18.3077C48.0769 20.9231 45.9231 23.0769 43.3077 23.0769C40.6923 23.0769 38.5385 20.9231 38.5385 18.3077C38.5385 15.6923 40.6923 13.5385 43.3077 13.5385Z" fill="#3776AB"/>
                <path d="M71.4615 66C68.8462 66 66.6923 68.1538 66.6923 70.7692C66.6923 73.3846 68.8462 75.5385 71.4615 75.5385C74.0769 75.5385 76.2308 73.3846 76.2308 70.7692C76.2308 68.1538 74.0769 66 71.4615 66Z" fill="#FFD43B"/>
                <path d="M55 107C67.1538 107 77.4615 96.9231 77.4615 84.4615V71.8462H54.5385V68.6154H86.6923C97.9231 68.6154 107 59.5385 107 48.3077V28.6154C107 17.3846 97.9231 8.30769 86.6923 8.30769H71.4615V23.2308C71.4615 30.1538 66.1538 35.4615 59.2308 35.4615H45.7692C38.8462 35.4615 33.5385 30.1538 33.5385 23.2308V8.30769H28.3077C16.0769 8.30769 6 18.3846 6 30.8462V43.4615C6 55.9231 16.0769 66 28.3077 66H41.5385V51.0769C41.5385 44.1538 46.8462 38.8462 53.7692 38.8462H67.2308C74.1538 38.8462 79.4615 44.1538 79.4615 51.0769V66H55C42.8462 66 32.5385 76.0769 32.5385 88.5385V101.462C32.5385 101.462 33.3846 107 55 107ZM66.6923 96.4615C64.0769 96.4615 61.9231 94.3077 61.9231 91.6923C61.9231 89.0769 64.0769 86.9231 66.6923 86.9231C69.3077 86.9231 71.4615 89.0769 71.4615 91.6923C71.4615 94.3077 69.3077 96.4615 66.6923 96.4615Z" fill="#FFD43B"/>
                <path d="M38.5385 44C41.1538 44 43.3077 41.8462 43.3077 39.2308C43.3077 36.6154 41.1538 34.4615 38.5385 34.4615C35.9231 34.4615 33.7692 36.6154 33.7692 39.2308C33.7692 41.8462 35.9231 44 38.5385 44Z" fill="#3776AB"/>
            </svg>
        );

        const App = () => {
            const [user, setUser] = useState(null);
            const [view, setView] = useState('home');
            const [studentData, setStudentData] = useState({ name: '', roll: '' });
            const [examState, setExamState] = useState({ active: false, questions: [], currentIndex: 0, answers: {}, timeLeft: 1500 });
            const [visitedIndices, setVisitedIndices] = useState(new Set());
            const [results, setResults] = useState([]);
            const [currentTime, setCurrentTime] = useState(new Date());
            const [modal, setModal] = useState({ show: false, title: '', message: '', type: 'info' });

            const examStart = new Date('2025-12-27T07:32:00');
            const examEnd = new Date('2025-12-29T12:00:00'); 

            // Auth Logic (Rule 3)
            useEffect(() => {
                if (!auth) return;
                const initAuth = async () => {
                    try {
                        if (typeof __initial_auth_token !== 'undefined' && __initial_auth_token) {
                            await signInWithCustomToken(auth, __initial_auth_token);
                        } else {
                            await signInAnonymously(auth);
                        }
                    } catch (e) {}
                };
                initAuth();
                const unsub = onAuthStateChanged(auth, setUser);
                const clock = setInterval(() => setCurrentTime(new Date()), 1000);
                return () => { unsub(); clearInterval(clock); };
            }, []);

            // Real-time Results Stream (Rule 1 & 2)
            useEffect(() => {
                if (!user || !db) return;
                const q = collection(db, 'artifacts', appId, 'public', 'data', 'results');
                const unsubRes = onSnapshot(q, (snap) => {
                    // Sorting in memory as per Rule 2
                    const rawData = snap.docs.map(doc => ({ id: doc.id, ...doc.data() }));
                    const sortedData = rawData.sort((a, b) => (b.score || 0) - (a.score || 0));
                    setResults(sortedData);
                }, (err) => console.error("Stream sync error"));
                return () => unsubRes();
            }, [user]);

            useEffect(() => {
                if (examState.active) setVisitedIndices(prev => new Set(prev).add(examState.currentIndex));
            }, [examState.currentIndex, examState.active]);

            const triggerModal = (title, message, type = 'info') => setModal({ show: true, title, message, type });

            const startExam = async () => {
                if (currentTime > examEnd) return triggerModal("Exam Closed", "The portal closed on 29-12-2025 at 12:00 PM.", "error");
                if (!studentData.name || !studentData.roll) return triggerModal("Details Required", "Please enter your name and roll number.", "error");
                
                if (db) {
                    const existing = results.find(r => r.roll === studentData.roll);
                    if (existing) {
                        return triggerModal("Prior Attempt", "Entry already exists for this Roll No. Contact Professor Amit Raval.", "info");
                    }
                }

                try { document.documentElement.requestFullscreen?.().catch(() => {}); } catch(e) {}
                setExamState({ active: true, questions: [...QUESTION_POOL].sort(() => Math.random() - 0.5), currentIndex: 0, answers: {}, timeLeft: 1500 });
                setVisitedIndices(new Set([0]));
                setView('exam');
            };

            const submitExam = async (auto = false) => {
                if (!auto && !confirm("Finalize assessment and finish examination?")) return;
                try {
                    if (document.exitFullscreen) document.exitFullscreen().catch(() => {});
                    let score = 0;
                    const examDetails = examState.questions.map((q, idx) => {
                        const selectedOptionIndex = examState.answers[idx];
                        const isCorrect = selectedOptionIndex === q.correct;
                        if (isCorrect) score++;
                        return {
                            questionText: q.q,
                            selectedOption: selectedOptionIndex !== undefined ? q.options[selectedOptionIndex] : "Skipped",
                            correctOption: q.options[q.correct],
                            wasCorrect: isCorrect
                        };
                    });

                    if (db && user) {
                        await setDoc(doc(db, 'artifacts', appId, 'public', 'data', 'results', studentData.roll), {
                            name: studentData.name, 
                            roll: studentData.roll, 
                            score, 
                            total: examState.questions.length, 
                            examDetails: examDetails, 
                            timestamp: new Date().toISOString(),
                            submissionType: auto ? "Auto-Submit" : "Manual"
                        });
                    }

                    setExamState(prev => ({ ...prev, active: false }));
                    setView('result'); // Directly go to live results after submission
                } catch (e) { 
                    triggerModal("Upload Failed", "Connectivity issue. Result not saved.", "error"); 
                }
            };

            useEffect(() => {
                if (examState.active && examState.timeLeft > 0) {
                    const timer = setInterval(() => {
                        setExamState(prev => {
                            if (prev.timeLeft <= 1) { clearInterval(timer); submitExam(true); return { ...prev, timeLeft: 0 }; }
                            return { ...prev, timeLeft: prev.timeLeft - 1 };
                        });
                    }, 1000);
                    return () => clearInterval(timer);
                }
            }, [examState.active, user]);

            const timeToStart = Math.max(0, examStart - currentTime);
            const isExamLive = currentTime >= examStart && currentTime <= examEnd;

            useEffect(() => { if (typeof lucide !== 'undefined') lucide.createIcons(); });

            return (
                <div className="min-h-screen flex flex-col">
                    {/* FIXED HEADER */}
                    <header className="fixed top-0 left-0 right-0 z-50 header-glass px-4 md:px-6 py-2 md:py-4 flex justify-between items-center shadow-lg header-fixed">
                        <div className="flex items-center gap-2 md:gap-4 cursor-pointer group" onClick={() => setView('home')}>
                            <div className="w-8 h-8 md:w-12 md:h-12 bg-white/5 rounded-lg flex items-center justify-center shadow-lg overflow-hidden">
                                <PythonLogo />
                            </div>
                            <div>
                                <h1 className="text-white font-extrabold text-[10px] md:text-lg leading-none uppercase tracking-tight heading-font">BCA <span className="hidden sm:inline">COLLEGE</span> <span className="text-blue-400">MODASA</span></h1>
                                <p className="text-slate-400 text-[8px] md:text-[10px] uppercase font-bold mt-1 tracking-widest italic">Prof. Amit Raval</p>
                            </div>
                        </div>
                        <nav className="flex items-center gap-3 md:gap-8">
                            {['Home', 'Examination', 'Results'].map((label, idx) => (
                                <button key={idx} onClick={() => setView(label === 'Examination' ? 'student-form' : label.toLowerCase())} className={`text-[9px] md:text-[11px] font-extrabold uppercase tracking-widest transition-all hover:text-blue-400 ${view.includes(label.toLowerCase()) ? 'text-blue-400 border-b-2 border-blue-400 pb-1' : 'text-slate-400'}`}>{label}</button>
                            ))}
                        </nav>
                        <div className="hidden sm:flex items-center gap-4 border-l border-white/10 pl-6">
                            <i data-lucide="shield-check" className="text-blue-500 w-5 h-5"></i>
                            <div className="text-right">
                                <p className="text-[10px] font-bold text-slate-500 uppercase tracking-widest">Support</p>
                                <p className="text-[10px] font-mono font-bold text-blue-500">+91 9638143173</p>
                            </div>
                        </div>
                    </header>

                    {/* MODAL */}
                    {modal.show && (
                        <div className="fixed inset-0 z-[200] flex items-center justify-center p-4 bg-black/95 backdrop-blur-md">
                            <div className="bg-slate-900 border border-white/10 p-6 md:p-10 rounded-3xl max-w-sm w-full text-center shadow-2xl animate-fade-in">
                                <i data-lucide={modal.type === 'error' ? 'alert-octagon' : 'info'} className={`mx-auto mb-4 w-10 h-10 ${modal.type === 'error' ? 'text-red-500' : 'text-blue-500'}`}></i>
                                <h3 className="text-xl md:text-2xl font-black text-white mb-2 uppercase italic">{modal.title}</h3>
                                <p className="text-slate-400 text-xs md:text-sm mb-6 leading-relaxed text-center">{modal.message}</p>
                                <button onClick={() => setModal({ ...modal, show: false })} className="w-full py-3 bg-blue-600 hover:bg-blue-700 text-white font-black rounded-xl uppercase tracking-widest text-[10px]">Okay</button>
                            </div>
                        </div>
                    )}

                    <main className="main-container flex-1 flex flex-col max-w-7xl mx-auto w-full px-4 md:px-6">
                        {view === 'home' && (
                            <div className="flex flex-col items-center justify-center text-center my-auto animate-fade-in py-8">
                                <div className="inline-flex items-center gap-2 px-4 py-1.5 rounded-full bg-blue-600/10 border border-blue-500/20 text-blue-400 text-[8px] md:text-[10px] font-black uppercase mb-8 md:mb-12">
                                    <i data-lucide="zap" className="w-3 h-3 md:w-4 md:h-4 fill-blue-400"></i> LIVE ASSESSMENT NODE
                                </div>
                                <h1 className="text-4xl md:text-8xl lg:text-9xl font-black text-white mb-6 md:mb-8 tracking-tighter leading-none heading-font italic uppercase">BCA <span className="text-blue-500">Modasa.</span></h1>
                                
                                <div className="bg-red-500/10 border border-red-500/20 p-4 md:p-6 rounded-2xl md:rounded-3xl mb-8 md:mb-12 max-w-2xl mx-auto backdrop-blur-md">
                                    <div className="flex items-center justify-center gap-2 text-red-500 mb-2 font-black uppercase tracking-widest text-[8px] md:text-[10px]">
                                        <i data-lucide="alert-circle" className="w-4 h-4"></i> Notice
                                    </div>
                                    <p className="text-slate-300 text-xs md:text-base font-semibold">
                                        Terminal closes on <span className="text-white underline decoration-red-500 underline-offset-4">29-12-2025 at 12:00 PM</span>.
                                    </p>
                                </div>

                                <p className="text-slate-400 text-sm md:text-2xl max-w-3xl mx-auto mb-10 md:mb-16 leading-relaxed font-medium opacity-80 uppercase italic">Official Python Programming Assessment Gateway. <br/> Managed by Professor Amit Raval.</p>
                                
                                {isExamLive ? (
                                    <div className="flex flex-col sm:flex-row gap-4 justify-center">
                                        <button onClick={() => setView('student-form')} className="px-10 py-4 md:px-16 md:py-7 gradient-btn text-white font-bold rounded-xl md:rounded-[2rem] shadow-xl text-[10px] md:text-sm active:scale-95 transition-all uppercase tracking-widest italic">Enter Exam</button>
                                        <button onClick={() => setView('result')} className="px-10 py-4 md:px-16 md:py-7 bg-slate-900 border border-white/10 text-white font-bold rounded-xl md:rounded-[2rem] shadow-xl text-[10px] md:text-sm active:scale-95 transition-all uppercase tracking-widest italic">Live Results</button>
                                    </div>
                                ) : (
                                    <div className="readable-card p-8 md:p-12 rounded-3xl md:rounded-[4rem] max-w-lg mx-auto border-t-blue-500/40 shadow-2xl">
                                        <h3 className="text-[10px] md:text-sm font-black mb-6 md:mb-10 uppercase tracking-widest text-slate-500 italic">Terminal Status</h3>
                                        <div className="grid grid-cols-3 gap-4 md:gap-16 text-center">
                                            {[['Hrs', Math.floor(timeToStart / 3600000)], ['Min', Math.floor((timeToStart % 3600000) / 60000)], ['Sec', Math.floor((timeToStart % 60000) / 1000)]].map(([l, v]) => (
                                                <div key={l}><span className="text-2xl md:text-7xl font-black text-white italic">{v}</span><p className="text-[8px] md:text-[10px] text-slate-500 font-bold uppercase mt-2">{l}</p></div>
                                            ))}
                                        </div>
                                    </div>
                                )}
                            </div>
                        )}

                        {view === 'student-form' && (
                            <div className="max-w-xl mx-auto mt-6 md:mt-10 w-full animate-fade-in pb-10">
                                <div className="readable-card p-8 md:p-20 rounded-3xl md:rounded-[5rem] relative shadow-2xl border-t-blue-500/40 text-center text-left">
                                    <h2 className="text-4xl md:text-6xl font-black text-white mb-2 md:mb-4 uppercase italic leading-none">Login</h2>
                                    <p className="text-blue-400 font-black tracking-widest text-[8px] md:text-xs uppercase italic opacity-70 mb-10 md:mb-20">Identity Validation protocol</p>
                                    <div className="space-y-6 md:y-12 text-left">
                                        <div className="space-y-2 md:space-y-5">
                                            <label className="text-[8px] md:text-xs text-blue-500 font-black uppercase tracking-widest ml-2 block italic">Academic Name</label>
                                            <input type="text" value={studentData.name} onChange={e => setStudentData({...studentData, name: e.target.value})} className="w-full input-field rounded-xl md:rounded-[2.5rem] p-4 md:p-8 text-sm md:text-2xl outline-none shadow-xl uppercase font-semibold" placeholder="Full Name" />
                                        </div>
                                        <div className="space-y-2 md:space-y-5">
                                            <label className="text-[8px] md:text-xs text-blue-500 font-black uppercase tracking-widest ml-2 block italic">College Roll Number</label>
                                            <input type="text" value={studentData.roll} onChange={e => setStudentData({...studentData, roll: e.target.value})} className="w-full input-field rounded-xl md:rounded-[2.5rem] p-4 md:p-8 text-sm md:text-2xl font-mono outline-none shadow-xl uppercase font-bold" placeholder="ID (e.g. 50)" />
                                        </div>
                                        <button onClick={startExam} className="w-full py-5 md:py-10 gradient-btn text-white font-black rounded-xl md:rounded-[4rem] text-[10px] md:text-sm mt-4 md:mt-10 active:scale-95 italic">Authorize Access</button>
                                    </div>
                                </div>
                            </div>
                        )}

                        {view === 'exam' && (
                            <div className="animate-fade-in no-select w-full pb-10">
                                <div className="header-glass p-4 md:p-8 rounded-2xl md:rounded-[3rem] mb-6 md:mb-12 flex flex-wrap justify-between items-center gap-4 shadow-xl">
                                    <div className="flex items-center gap-3 md:gap-6">
                                        <div className="w-10 h-10 md:w-16 md:h-16 bg-blue-600 rounded-lg md:rounded-2xl flex items-center justify-center font-black text-xl md:text-3xl italic text-white">{examState.currentIndex + 1}</div>
                                        <div>
                                            <h3 className="font-black text-white text-sm md:text-2xl tracking-tighter uppercase italic leading-none">{studentData.name}</h3>
                                            <p className="text-[8px] md:text-[10px] text-slate-500 font-black tracking-widest uppercase mt-1 italic">Roll: {studentData.roll}</p>
                                        </div>
                                    </div>
                                    <div className="flex items-center gap-6 md:gap-12 ml-auto">
                                        <div className="font-mono text-right"><span className={`text-xl md:text-4xl font-black tabular-nums ${examState.timeLeft < 300 ? 'text-red-500 animate-pulse' : 'text-blue-400'}`}>{Math.floor(examState.timeLeft / 60)}:{(examState.timeLeft % 60).toString().padStart(2, '0')}</span></div>
                                        <button onClick={() => submitExam()} className="px-4 py-2 md:px-10 md:py-4 bg-red-600 hover:bg-red-700 text-white rounded-lg md:rounded-2xl font-black uppercase text-[8px] md:text-xs italic shadow-lg">Finish Examination</button>
                                    </div>
                                </div>

                                <div className="grid grid-cols-1 lg:grid-cols-4 gap-6 md:gap-12 text-left">
                                    <div className="lg:col-span-3 space-y-6 md:space-y-12">
                                        <div className="readable-card p-6 md:p-16 rounded-3xl md:rounded-[5rem] shadow-xl min-h-[350px] md:min-h-[600px] flex flex-col border-t-blue-500/30">
                                            <div className="flex items-center gap-4 mb-6 md:mb-12 border-b border-white/5 pb-4"><p className="text-blue-400 font-mono text-[8px] md:text-xs font-black tracking-widest uppercase italic">Question {examState.currentIndex + 1} / 25</p></div>
                                            <h2 className="text-lg md:text-4xl font-black leading-snug mb-8 md:mb-16 text-white italic tracking-tight">{examState.questions[examState.currentIndex]?.q}</h2>
                                            <div className="grid grid-cols-1 gap-3 md:gap-6 mt-auto">
                                                {examState.questions[examState.currentIndex]?.options.map((opt, i) => (
                                                    <button key={i} onClick={() => setExamState({...examState, answers: {...examState.answers, [examState.currentIndex]: i}})} className={`w-full p-4 md:p-8 text-left rounded-2xl md:rounded-[3rem] border-2 transition-all flex justify-between items-center group ${examState.answers[examState.currentIndex] === i ? 'bg-blue-600 border-blue-400 text-white scale-[1.01]' : 'bg-slate-900 border-white/5 text-slate-400'}`}>
                                                        <span className="font-black text-xs md:text-2xl tracking-tighter uppercase italic">{opt}</span>
                                                        <div className={`w-5 h-5 md:w-8 md:h-8 rounded-full border-2 flex items-center justify-center ${examState.answers[examState.currentIndex] === i ? 'border-white bg-blue-500 shadow-lg' : 'border-slate-800 bg-slate-950'}`}>
                                                            {examState.answers[examState.currentIndex] === i && <div className="w-2.5 h-2.5 md:w-4 md:h-4 bg-white rounded-full"></div>}
                                                        </div>
                                                    </button>
                                                ))}
                                            </div>
                                        </div>
                                        <div className="flex justify-between items-center px-2 md:px-10">
                                            <button disabled={examState.currentIndex === 0} onClick={() => setExamState({...examState, currentIndex: examState.currentIndex - 1})} className="px-6 py-3 md:px-12 md:py-6 bg-slate-900 text-white rounded-full flex items-center gap-2 md:gap-6 font-black text-[10px] md:text-xs disabled:opacity-20 uppercase tracking-widest italic border border-white/5 active:scale-95"><i data-lucide="chevron-left" className="w-4 h-4 md:w-6 md:h-6"></i> Previous</button>
                                            <button disabled={examState.currentIndex === 24} onClick={() => setExamState({...examState, currentIndex: examState.currentIndex + 1})} className="px-6 py-3 md:px-12 md:py-6 bg-slate-900 text-white rounded-full flex items-center gap-2 md:gap-6 font-black text-[10px] md:text-xs disabled:opacity-20 uppercase tracking-widest italic border border-white/5 active:scale-95">Next <i data-lucide="chevron-right" className="w-4 h-4 md:w-6 md:h-6"></i></button>
                                        </div>
                                    </div>

                                    <div className="lg:col-span-1 space-y-8 md:space-y-16 h-fit lg:sticky lg:top-32 text-left">
                                        <div className="readable-card p-6 md:p-10 rounded-3xl md:rounded-[3.5rem] shadow-xl">
                                            <div className="flex items-center gap-3 mb-6 md:mb-10 border-b border-white/10 pb-4"><i data-lucide="layout-grid" className="w-5 h-5 md:w-6 md:h-6 text-blue-500"></i><h4 className="font-black text-slate-100 text-[10px] md:text-xs uppercase tracking-widest italic">Progress Matrix</h4></div>
                                            <div className="grid grid-cols-5 gap-2 md:gap-4">
                                                {examState.questions.map((_, i) => {
                                                    const isSelected = examState.answers[i] !== undefined;
                                                    const isVisited = visitedIndices.has(i);
                                                    const isCurrent = examState.currentIndex === i;
                                                    let statusClass = "bg-slate-950/50 border-white/10 text-slate-600";
                                                    if (isSelected) statusClass = "bg-green-600 border-green-500 text-white";
                                                    else if (isVisited && !isCurrent) statusClass = "bg-red-600/80 border-red-500 text-white";
                                                    if (isCurrent) statusClass += " border-blue-400 text-blue-400 bg-blue-500/20 scale-110 z-10 shadow-blue-500/40";
                                                    return ( <button key={i} onClick={() => setExamState({...examState, currentIndex: i})} className={`w-full aspect-square rounded-lg md:rounded-xl text-[10px] md:text-xs font-black border-2 transition-all flex items-center justify-center font-mono ${statusClass}`}>{i + 1}</button> );
                                                })}
                                            </div>
                                            <div className="mt-8 space-y-2 pt-6 border-t border-white/10 text-[8px] md:text-[10px] font-bold uppercase tracking-widest text-slate-400 italic">
                                                <div className="flex items-center gap-2"><span className="w-2 h-2 rounded-full bg-green-500"></span> Answered</div>
                                                <div className="flex items-center gap-2"><span className="w-2 h-2 rounded-full bg-red-500"></span> Skipped</div>
                                                <div className="flex items-center gap-2"><span className="w-2 h-2 rounded-full bg-blue-400"></span> Current Node</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        )}

                        {/* LIVE RESULTS VIEW */}
                        {view === 'result' && (
                            <div className="max-w-4xl mx-auto mt-4 md:mt-10 animate-fade-in w-full pb-20 text-left">
                                <div className="readable-card p-6 md:p-16 rounded-3xl md:rounded-[5rem] shadow-2xl border-t-blue-500/40 relative overflow-hidden">
                                    <div className="flex justify-between items-end mb-12 md:mb-20 relative z-10">
                                        <div className="text-left">
                                            <h2 className="text-4xl md:text-7xl font-black text-white mb-2 md:mb-4 uppercase italic leading-none underline decoration-blue-500 decoration-8 underline-offset-[10px]">Rankings</h2>
                                            <p className="text-blue-400 font-black tracking-widest text-[8px] md:text-xs uppercase italic opacity-70">Real-time terminal score feed</p>
                                        </div>
                                        <i data-lucide="trophy" className="text-yellow-500 w-16 h-16 md:w-32 md:h-32 drop-shadow-[0_0_40px_rgba(234,179,8,0.5)] animate-bounce"></i>
                                    </div>
                                    
                                    <div className="space-y-4 md:space-y-8 relative z-10">
                                        {results.length === 0 ? (
                                            <div className="text-center py-20 opacity-20 italic font-black uppercase tracking-[0.5em] text-white">No nodes active</div>
                                        ) : (
                                            results.map((res, i) => (
                                                <div key={i} className="group border-b border-white/5 pb-4 md:pb-8 last:border-none transition-all hover:bg-white/5 rounded-xl md:rounded-2xl p-2 md:p-4">
                                                    <div className="flex justify-between items-center mb-2 md:mb-4 px-2 md:px-6">
                                                        <div className="flex items-center gap-4 md:gap-10">
                                                            <span className={`w-8 h-8 md:w-16 md:h-16 rounded-lg md:rounded-2xl flex items-center justify-center text-xs md:text-3xl font-black italic shadow-2xl ${i === 0 ? 'bg-yellow-500 text-black rotate-12' : i === 1 ? 'bg-slate-300 text-black' : i === 2 ? 'bg-amber-700 text-white' : 'bg-slate-800 text-slate-500'}`}>{i+1}</span>
                                                            <div className="text-left">
                                                                <span className="font-black text-sm md:text-4xl text-slate-100 uppercase tracking-tighter italic leading-none">{res.name}</span>
                                                                <p className="text-[8px] md:text-[11px] text-slate-500 font-black tracking-widest mt-1">ROLL: {res.roll}</p>
                                                            </div>
                                                        </div>
                                                        <div className="text-right">
                                                            <span className="font-mono text-blue-500 text-lg md:text-6xl font-black tracking-tighter tabular-nums drop-shadow-lg">{res.score}<span className="text-[8px] md:text-xl opacity-20 uppercase ml-1 md:ml-4 italic tracking-widest">val</span></span>
                                                        </div>
                                                    </div>
                                                    <div className="w-full bg-slate-950 h-1 md:h-2 rounded-full overflow-hidden border border-white/5 p-0.5 shadow-inner">
                                                        <div className="h-full bg-gradient-to-r from-blue-700 via-blue-500 to-blue-400 rounded-full transition-all duration-1000 shadow-[0_0_15px_rgba(59,130,246,0.5)]" style={{ width: `${(res.score/25)*100}%` }}></div>
                                                    </div>
                                                </div>
                                            ))
                                        )}
                                    </div>
                                </div>
                            </div>
                        )}
                    </main>
                    
                    {/* CLASSIC INSTITUTIONAL FOOTER */}
                    <footer className="mt-auto border-t-2 border-blue-500/20 py-10 md:py-20 bg-slate-950/90 backdrop-blur-xl relative z-20">
                        <div className="max-w-7xl mx-auto px-6 md:px-10 grid grid-cols-1 md:grid-cols-3 gap-10 md:gap-16 text-left">
                            <div className="space-y-4 md:space-y-6">
                                <div className="flex items-center gap-3">
                                    <div className="w-8 h-8 md:w-10 md:h-10 bg-blue-600/20 rounded-lg flex items-center justify-center p-1 overflow-hidden"><PythonLogo /></div>
                                    <h3 className="text-lg md:text-2xl font-black tracking-tighter text-white uppercase italic">BCA MODASA</h3>
                                </div>
                                <p className="text-slate-400 text-[10px] md:text-sm leading-relaxed italic">Providing technical excellence. Empowering Python developers via advanced assessment nodes.</p>
                            </div>
                            <div className="space-y-4 md:space-y-6 text-left">
                                <h4 className="text-[10px] font-black uppercase tracking-widest text-blue-500 border-b border-white/5 pb-2 inline-block italic">Navigation</h4>
                                <ul className="space-y-2 md:space-y-4">
                                    {['Home', 'Examination', 'Results'].map(link => (
                                        <li key={link}>
                                            <button onClick={() => setView(link === 'Examination' ? 'student-form' : link.toLowerCase())} className="text-slate-500 hover:text-white text-[10px] md:text-sm font-bold uppercase tracking-widest transition-colors flex items-center gap-2 group"><span className="w-1 h-1 md:w-1.5 md:h-1.5 bg-blue-500 rounded-full opacity-0 group-hover:opacity-100 transition-opacity"></span>{link}</button>
                                        </li>
                                    ))}
                                </ul>
                            </div>
                            <div className="space-y-4 md:space-y-6 text-left">
                                <h4 className="text-[10px] font-black uppercase tracking-widest text-blue-500 border-b border-white/5 pb-2 inline-block italic">Support Node</h4>
                                <div className="space-y-2 md:space-y-4 text-left">
                                    <div className="flex items-center gap-3 text-slate-400 text-[10px] md:text-sm font-mono"><i data-lucide="phone" className="w-4 h-4 text-blue-500"></i><span>+91 9638143173</span></div>
                                    <div className="pt-4 border-t border-white/5"><p className="text-[8px] md:text-[10px] font-black uppercase tracking-widest text-slate-600 italic uppercase italic">"Logic to Target, Coding Digital India"</p></div>
                                </div>
                            </div>
                        </div>
                        <div className="max-w-7xl mx-auto px-6 md:px-10 mt-12 md:mt-20 pt-6 md:pt-8 border-t border-white/5 flex flex-col md:flex-row justify-between items-center gap-4 text-center">
                            <p className="text-slate-600 text-[8px] md:text-[10px] font-black uppercase tracking-widest">© 2025 BCA MODASA • ALL RIGHTS RESERVED</p>
                            <p className="text-slate-500 text-[8px] md:text-[10px] font-black uppercase tracking-widest italic md:text-right">Engineered by <span className="text-blue-500">Prof. Amit Raval</span></p>
                        </div>
                    </footer>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);

        window.addEventListener('load', () => { if (typeof lucide !== 'undefined') lucide.createIcons(); });
        window.addEventListener('resize', () => { if (typeof lucide !== 'undefined') lucide.createIcons(); });
    </script>
</body>
</html>