<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BCA College Modasa | Professional Exam Portal</title>
    
    <!-- External Libraries -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://unpkg.com/lucide@latest"></script>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Plus+Jakarta+Sans:wght@400;700;800&display=swap');
        
        :root {
            --header-height: 80px;
        }

        body { 
            font-family: 'Inter', sans-serif; 
            background-color: #030712; 
            color: #f1f5f9;
            -webkit-font-smoothing: antialiased;
            scroll-padding-top: var(--header-height);
        }

        .heading-font { font-family: 'Plus Jakarta Sans', sans-serif; }

        /* Custom Scrollbar */
        .custom-scroll::-webkit-scrollbar { width: 6px; }
        .custom-scroll::-webkit-scrollbar-track { background: #020617; }
        .custom-scroll::-webkit-scrollbar-thumb { background: #334155; border-radius: 10px; }
        .custom-scroll::-webkit-scrollbar-thumb:hover { background: #3b82f6; }

        /* Sticky Header */
        .header-glass {
            background: rgba(15, 23, 42, 0.95);
            backdrop-filter: blur(16px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .header-fixed {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            height: var(--header-height);
            z-index: 100;
        }

        /* Container Padding to prevent header overlap */
        .main-container {
            margin-top: var(--header-height);
            padding-top: 2rem;
            min-height: calc(100vh - var(--header-height));
            position: relative;
            z-index: 10;
        }

        /* Card Styling */
        .readable-card {
            background: rgba(23, 31, 48, 0.8);
            border: 1px solid rgba(255, 255, 255, 0.12);
            backdrop-filter: blur(24px);
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.7);
        }

        /* Sharp Inputs with High Contrast */
        .input-field {
            background: rgba(10, 15, 28, 0.9);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: #ffffff;
            font-size: 1.125rem;
            transition: all 0.2s ease;
        }
        .input-field:focus {
            border-color: #3b82f6;
            background: rgba(0, 0, 0, 1);
            box-shadow: 0 0 0 4px rgba(59, 130, 246, 0.2);
        }
        .input-field::placeholder {
            color: rgba(255, 255, 255, 0.5) !important;
            opacity: 1 !important;
        }

        .gradient-btn {
            background: linear-gradient(135deg, #2563eb 0%, #1d4ed8 100%);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        .gradient-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 12px 24px -6px rgba(37, 99, 235, 0.5);
            filter: brightness(1.1);
        }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .animate-fade-in { animation: fadeIn 0.4s ease-out forwards; }

        .no-select { user-select: none; }

        .blob {
            position: absolute;
            width: 400px;
            height: 400px;
            background: radial-gradient(circle, rgba(59, 130, 246, 0.08) 0%, transparent 70%);
            border-radius: 50%;
            z-index: -1;
            pointer-events: none;
        }
    </style>
</head>
<body class="min-h-screen custom-scroll overflow-y-auto relative no-select">
    <div class="blob top-0 left-0"></div>
    <div class="blob bottom-0 right-0"></div>
    <div id="root"></div>

    <script type="text/babel" data-type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-app.js";
        import { getFirestore, collection, doc, setDoc, getDoc, updateDoc, onSnapshot, query, addDoc, getDocs } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-firestore.js";
        import { getAuth, signInAnonymously, onAuthStateChanged, signInWithCustomToken } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-auth.js";

        const { useState, useEffect, useRef } = React;

        // Firebase Configuration
        const firebaseConfig = JSON.parse(__firebase_config);
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);
        const auth = getAuth(app);
        const appId = typeof __app_id !== 'undefined' ? __app_id : 'bca-modasa-python-2025';

        // --- QUESTION BANK: BASIC TOPICS ONLY (English) ---
        const QUESTION_POOL = [
            { q: "Who is the primary developer of the Python programming language?", options: ["Guido van Rossum", "Dennis Ritchie", "Bjarne Stroustrup", "James Gosling"], correct: 0 },
            { q: "In which year was Python first released?", options: ["1989", "1991", "1995", "2000"], correct: 1 },
            { q: "Which function is used to display text on the screen?", options: ["output()", "display()", "print()", "write()"], correct: 2 },
            { q: "What is the correct syntax to output 'Hello World' in Python?", options: ["echo 'Hello World'", "print('Hello World')", "printf('Hello World')", "console.log('Hello World')"], correct: 1 },
            { q: "Which function is used to take input from the user?", options: ["get()", "input()", "read()", "scan()"], correct: 1 },
            { q: "What is the default return type of the input() function?", options: ["Integer", "Float", "String", "Boolean"], correct: 2 },
            { q: "How do you create a comment in Python?", options: ["// This is a comment", "/* This is a comment */", "# This is a comment", "-- This is a comment"], correct: 2 },
            { q: "Which statement is used for decision making?", options: ["if", "for", "while", "else"], correct: 0 },
            { q: "What is the correct way to start an 'if' statement in Python?", options: ["if x > 5 then:", "if x > 5:", "if (x > 5)", "if x > 5 {}"], correct: 1 },
            { q: "Which keyword is used to check another condition if the first 'if' is false?", options: ["else if", "elif", "next if", "elseif"], correct: 1 },
            { q: "How is a code block defined in Python?", options: ["Curly Braces", "Indentation", "Parentheses", "Keywords"], correct: 1 },
            { q: "Which loop is used to iterate over a sequence (like a list)?", options: ["while", "for", "do-while", "foreach"], correct: 1 },
            { q: "Which loop repeats as long as a condition is True?", options: ["for", "while", "until", "repeat"], correct: 1 },
            { q: "What will range(5) produce as the starting value?", options: ["1", "0", "5", "None"], correct: 1 },
            { q: "What is the last value produced by range(5)?", options: ["5", "4", "6", "0"], correct: 1 },
            { q: "Which brackets are used to define a List in Python?", options: ["()", "{}", "[]", "<>"], correct: 2 },
            { q: "Lists in Python are:", options: ["Mutable (Changeable)", "Immutable (Unchangeable)", "Fixed size", "Constant"], correct: 0 },
            { q: "Which brackets are used to define a Tuple in Python?", options: ["[]", "{}", "()", "||"], correct: 2 },
            { q: "Tuples in Python are:", options: ["Mutable", "Immutable", "Dynamic", "Undefined"], correct: 1 },
            { q: "How do you access the first element of a list named 'my_list'?", options: ["my_list[1]", "my_list[0]", "my_list{0}", "my_list.first()"], correct: 1 },
            { q: "Which method is used to add an item to the end of a list?", options: ["add()", "insert()", "append()", "extend()"], correct: 2 },
            { q: "Which keyword is used to stop a loop immediately?", options: ["exit", "stop", "break", "continue"], correct: 2 },
            { q: "Which keyword skips the current iteration of a loop?", options: ["skip", "pass", "continue", "break"], correct: 2 },
            { q: "Which operator is used for exponentiation (power)?", options: ["^", "*", "**", "^^"], correct: 2 },
            { q: "What will print(10 // 3) output?", options: ["3.33", "3", "3.0", "4"], correct: 1 }
        ];

        const PythonLogo = () => (
            <svg width="42" height="42" viewBox="0 0 110 110" fill="none" xmlns="http://www.w3.org/2000/svg" className="drop-shadow-[0_0_8px_rgba(55,118,171,0.6)]">
                <path d="M55 3C42.8462 3 32.5385 13.0769 32.5385 25.5385V38.1538H55.4615V41.3846H23.3077C12.0769 41.3846 3 50.4615 3 61.6923V81.3846C3 92.6154 12.0769 101.692 23.3077 101.692H38.5385V86.7692C38.5385 79.8462 43.8462 74.5385 50.7692 74.5385H64.2308C71.1538 74.5385 76.4615 79.8462 76.4615 86.7692V101.692H81.6923C93.9231 101.692 104 91.6154 104 79.1538V66.5385C104 54.0769 93.9231 44 81.6923 44H68.4615V58.9231C68.4615 65.8462 63.1538 71.1538 56.2308 71.1538H42.7692C35.8462 71.1538 30.5385 65.8462 30.5385 58.9231V44H55C67.1538 44 77.4615 33.9231 77.4615 21.4615V8.53846C77.4615 8.53846 76.6154 3 55 3ZM43.3077 13.5385C45.9231 13.5385 48.0769 15.6923 48.0769 18.3077C48.0769 20.9231 45.9231 23.0769 43.3077 23.0769C40.6923 23.0769 38.5385 20.9231 38.5385 18.3077C38.5385 15.6923 40.6923 13.5385 43.3077 13.5385Z" fill="#3776AB"/>
                <path d="M71.4615 66C68.8462 66 66.6923 68.1538 66.6923 70.7692C66.6923 73.3846 68.8462 75.5385 71.4615 75.5385C74.0769 75.5385 76.2308 73.3846 76.2308 70.7692C76.2308 68.1538 74.0769 66 71.4615 66Z" fill="#FFD43B"/>
                <path d="M55 107C67.1538 107 77.4615 96.9231 77.4615 84.4615V71.8462H54.5385V68.6154H86.6923C97.9231 68.6154 107 59.5385 107 48.3077V28.6154C107 17.3846 97.9231 8.30769 86.6923 8.30769H71.4615V23.2308C71.4615 30.1538 66.1538 35.4615 59.2308 35.4615H45.7692C38.8462 35.4615 33.5385 30.1538 33.5385 23.2308V8.30769H28.3077C16.0769 8.30769 6 18.3846 6 30.8462V43.4615C6 55.9231 16.0769 66 28.3077 66H41.5385V51.0769C41.5385 44.1538 46.8462 38.8462 53.7692 38.8462H67.2308C74.1538 38.8462 79.4615 44.1538 79.4615 51.0769V66H55C42.8462 66 32.5385 76.0769 32.5385 88.5385V101.462C32.5385 101.462 33.3846 107 55 107ZM66.6923 96.4615C64.0769 96.4615 61.9231 94.3077 61.9231 91.6923C61.9231 89.0769 64.0769 86.9231 66.6923 86.9231C69.3077 86.9231 71.4615 89.0769 71.4615 91.6923C71.4615 94.3077 69.3077 96.4615 66.6923 96.4615Z" fill="#FFD43B"/>
                <path d="M38.5385 44C41.1538 44 43.3077 41.8462 43.3077 39.2308C43.3077 36.6154 41.1538 34.4615 38.5385 34.4615C35.9231 34.4615 33.7692 36.6154 33.7692 39.2308C33.7692 41.8462 35.9231 44 38.5385 44Z" fill="#3776AB"/>
            </svg>
        );

        const Icon = ({ name, size = 20, className = "" }) => {
            useEffect(() => { if (typeof lucide !== 'undefined') lucide.createIcons(); }, [name]);
            return <i data-lucide={name} style={{ width: size, height: size }} className={className}></i>;
        };

        const App = () => {
            const [user, setUser] = useState(null);
            const [view, setView] = useState('home');
            const [studentData, setStudentData] = useState({ name: '', roll: '' });
            const [examState, setExamState] = useState({
                active: false, questions: [], currentIndex: 0, answers: {}, timeLeft: 1500
            });
            const [visitedIndices, setVisitedIndices] = useState(new Set());
            const [results, setResults] = useState([]);
            const [currentTime, setCurrentTime] = useState(new Date());
            const [modal, setModal] = useState({ show: false, title: '', message: '', type: 'info' });

            const examStart = new Date('2025-12-27T07:32:00');
            const examEnd = new Date('2025-12-31T23:59:59');

            const triggerModal = (title, message, type = 'info') => {
                setModal({ show: true, title, message, type });
            };

            // Auth Logic (Rule 3)
            useEffect(() => {
                const initAuth = async () => {
                    try {
                        if (typeof __initial_auth_token !== 'undefined' && __initial_auth_token) {
                            await signInWithCustomToken(auth, __initial_auth_token);
                        } else {
                            await signInAnonymously(auth);
                        }
                    } catch (e) { console.error("Database connection failed."); }
                };
                initAuth();
                const unsub = onAuthStateChanged(auth, setUser);
                const clock = setInterval(() => setCurrentTime(new Date()), 1000);
                return () => { unsub(); clearInterval(clock); };
            }, []);

            // Visited Tracker Logic
            useEffect(() => {
                if (examState.active) {
                    setVisitedIndices(prev => new Set(prev).add(examState.currentIndex));
                }
            }, [examState.currentIndex, examState.active]);

            // Data Streams (Rule 1 & 2)
            useEffect(() => {
                if (!user) return;
                const unsubRes = onSnapshot(collection(db, 'artifacts', appId, 'public', 'data', 'results'), (snap) => {
                    setResults(snap.docs.map(doc => ({ id: doc.id, ...doc.data() })).sort((a, b) => (b.score || 0) - (a.score || 0)));
                }, (err) => console.error("Error fetching results"));
                return () => { unsubRes(); };
            }, [user]);

            const isExamLive = currentTime >= examStart && currentTime <= examEnd;
            const timeToStart = Math.max(0, examStart - currentTime);

            const startExam = async () => {
                if (!user) return;
                if (!studentData.name || !studentData.roll) return triggerModal("Details Required", "Please enter your name and roll number.", "error");
                
                const existing = results.find(r => r.roll === studentData.roll);
                if (existing) {
                    const qSnap = await getDocs(query(collection(db, 'artifacts', appId, 'public', 'data', 'requests')));
                    const approved = qSnap.docs.find(d => d.data().roll === studentData.roll && d.data().status === 'approved');
                    
                    if (!approved) {
                        if (confirm("Previous attempt detected. Request re-authorization?")) {
                            await addDoc(collection(db, 'artifacts', appId, 'public', 'data', 'requests'), {
                                name: studentData.name, roll: studentData.roll, status: 'pending', timestamp: new Date().toISOString()
                            });
                            triggerModal("Request Sent", "Waiting for Professor's approval.", "info");
                        }
                        return;
                    }
                }

                try { document.documentElement.requestFullscreen().catch(() => {}); } catch(e) {}
                const shuffled = [...QUESTION_POOL].sort(() => Math.random() - 0.5);

                setExamState({
                    active: true,
                    questions: shuffled.slice(0, 25),
                    currentIndex: 0,
                    answers: {},
                    timeLeft: 1500
                });
                setVisitedIndices(new Set([0]));
                setView('exam');
            };

            const submitExam = async (auto = false) => {
                if (!user) return triggerModal("Session Error", "Authentication lost. Please refresh.", "error");
                if (!auto && !confirm("Finalize assessment?")) return;
                
                try {
                    if (document.exitFullscreen) document.exitFullscreen().catch(() => {});
                    let score = 0;
                    const details = examState.questions.map((q, idx) => {
                        const selected = examState.answers[idx];
                        if (selected === q.correct) score++;
                        return { question: q.q, selected, correct: q.correct, options: q.options };
                    });

                    await setDoc(doc(db, 'artifacts', appId, 'public', 'data', 'results', studentData.roll), {
                        name: studentData.name, roll: studentData.roll, score, total: 25, details, timestamp: new Date().toISOString()
                    });

                    setExamState(prev => ({ ...prev, active: false }));
                    setView('result');
                } catch (e) {
                    triggerModal("Upload Failed", "Connection error. Result not saved.", "error");
                }
            };

            useEffect(() => {
                if (examState.active && examState.timeLeft > 0) {
                    const timer = setInterval(() => {
                        setExamState(prev => {
                            if (prev.timeLeft <= 1) { clearInterval(timer); submitExam(true); return { ...prev, timeLeft: 0 }; }
                            return { ...prev, timeLeft: prev.timeLeft - 1 };
                        });
                    }, 1000);
                    return () => clearInterval(timer);
                }
            }, [examState.active, user]);

            return (
                <div className="min-h-screen flex flex-col">
                    {/* FIXED HEADER */}
                    <header className="fixed top-0 left-0 right-0 z-50 header-glass px-6 py-4 flex justify-between items-center shadow-lg h-20 header-fixed">
                        <div className="flex items-center gap-4 cursor-pointer group" onClick={() => setView('home')}>
                            <div className="w-12 h-12 bg-white/5 rounded-xl flex items-center justify-center shadow-lg group-hover:rotate-12 transition-transform">
                                <PythonLogo />
                            </div>
                            <div>
                                <h1 className="text-white font-extrabold text-base md:text-lg leading-none uppercase tracking-tight heading-font">BCA COLLEGE <span className="text-blue-400">MODASA</span></h1>
                                <p className="text-slate-400 text-[10px] uppercase font-bold mt-1 tracking-widest italic">Prof. Amit Raval</p>
                            </div>
                        </div>
                        
                        <nav className="hidden lg:flex items-center gap-10 ml-auto mr-10">
                            {[
                                {label: 'Home', view: 'home'},
                                {label: 'Start Examination', view: 'student-form', action: () => isExamLive ? setView('student-form') : triggerModal("Locked", "Opens at 07:32 AM.")},
                                {label: 'Leaderboard', view: 'result'}
                            ].map((item, idx) => (
                                <button key={idx} onClick={item.action || (() => setView(item.view))} className={`text-[11px] font-extrabold uppercase tracking-[0.2em] transition-all hover:text-blue-400 ${view === item.view ? 'text-blue-400 border-b-2 border-blue-400 pb-1' : 'text-slate-400'}`}>{item.label}</button>
                            ))}
                        </nav>

                        <div className="flex items-center gap-4 border-l border-white/10 pl-6">
                            <Icon name="shield-check" className="text-blue-500" size={24} />
                            <div className="text-right">
                                <p className="text-[10px] font-bold text-slate-500 uppercase tracking-widest">Support</p>
                                <p className="text-xs font-mono font-bold text-blue-500 tracking-tighter">+91 9638143173</p>
                            </div>
                        </div>
                    </header>

                    {/* GLOBAL MODAL */}
                    {modal.show && (
                        <div className="fixed inset-0 z-[200] flex items-center justify-center p-6 bg-black/95 backdrop-blur-md">
                            <div className="bg-slate-900 border border-white/10 p-10 rounded-[3rem] max-w-sm w-full text-center shadow-2xl border-t-blue-500/50 animate-fade-in">
                                <Icon name={modal.type === 'error' ? 'alert-octagon' : 'info'} size={60} className={`mx-auto mb-6 ${modal.type === 'error' ? 'text-red-500' : 'text-blue-500'}`} />
                                <h3 className="text-2xl font-black text-white mb-4 uppercase heading-font italic tracking-tight">{modal.title}</h3>
                                <p className="text-slate-400 text-sm mb-10 leading-relaxed font-medium">{modal.message}</p>
                                <button onClick={() => setModal({ ...modal, show: false })} className="w-full py-4 bg-blue-600 hover:bg-blue-700 text-white font-black rounded-2xl uppercase tracking-widest text-xs shadow-lg active:scale-95 transition-all">Okay</button>
                            </div>
                        </div>
                    )}

                    <main className="main-container flex-1 flex flex-col max-w-7xl mx-auto w-full px-6">
                        
                        {/* HOME VIEW */}
                        {view === 'home' && (
                            <div className="flex flex-col items-center justify-center text-center my-auto animate-fade-in">
                                <div className="inline-flex items-center gap-3 px-6 py-2 rounded-full bg-blue-600/10 border border-blue-500/20 text-blue-400 text-[10px] font-black uppercase mb-12 tracking-widest">
                                    <Icon name="zap" size={14} className="fill-blue-400" /> Professional Assessment Portal
                                </div>
                                <h1 className="text-5xl md:text-9xl font-black text-white mb-8 tracking-tighter leading-none heading-font italic uppercase">BCA <span className="text-blue-500 uppercase">Modasa.</span></h1>
                                <p className="text-slate-400 text-lg md:text-2xl max-w-3xl mx-auto mb-16 leading-relaxed font-medium uppercase tracking-[0.05em] opacity-80 italic">Official Python Programming Node. <br/> Managed by Professor Amit Raval.</p>
                                
                                {isExamLive ? (
                                    <div className="flex flex-col sm:flex-row gap-8">
                                        <button onClick={() => setView('student-form')} className="px-16 py-7 gradient-btn text-white font-bold rounded-[2rem] shadow-xl text-sm italic active:scale-95 transition-all">Enter Examination</button>
                                        <button onClick={() => setView('result')} className="px-16 py-7 bg-slate-900 border border-white/10 text-white font-black rounded-[2rem] shadow-xl hover:bg-slate-800 transition-all text-sm italic active:scale-95">Leaderboard</button>
                                    </div>
                                ) : (
                                    <div className="readable-card p-12 rounded-[4rem] max-w-lg mx-auto border-t-blue-500/40 shadow-2xl">
                                        <h3 className="text-sm font-black mb-10 uppercase tracking-[0.6em] text-slate-500 italic text-center">Terminal Activation In</h3>
                                        <div className="grid grid-cols-3 gap-8 text-center">
                                            {[['Hrs', Math.floor(timeToStart / 3600000)], ['Mins', Math.floor((timeToStart % 3600000) / 60000)], ['Secs', Math.floor((timeToStart % 60000) / 1000)]].map(([l, v]) => (
                                                <div key={l}>
                                                    <span className="text-4xl font-bold text-white tabular-nums italic">{v}</span>
                                                    <p className="text-[10px] text-slate-500 font-bold uppercase mt-2">{l}</p>
                                                </div>
                                            ))}
                                        </div>
                                    </div>
                                )}
                            </div>
                        )}

                        {/* LOGIN VIEW */}
                        {view === 'student-form' && (
                            <div className="max-w-xl mx-auto mt-10 w-full animate-fade-in pb-20">
                                <div className="readable-card p-16 md:p-24 rounded-[5rem] relative shadow-2xl border-t-blue-500/40">
                                    <div className="mb-20 text-center">
                                        <h2 className="text-5xl font-black text-white mb-4 uppercase tracking-tighter italic heading-font leading-none">Exam Login</h2>
                                        <p className="text-blue-400 font-black tracking-[0.6em] text-xs uppercase italic opacity-70">Identity Validation Protocol</p>
                                    </div>
                                    
                                    <div className="space-y-12">
                                        <div className="space-y-5">
                                            <label className="text-xs text-blue-500 font-black uppercase tracking-[0.4em] ml-4 block italic">Candidate Full Name</label>
                                            <input type="text" value={studentData.name} onChange={e => setStudentData({...studentData, name: e.target.value})} className="w-full input-field rounded-[2.5rem] p-10 text-2xl outline-none shadow-2xl uppercase placeholder:opacity-10" placeholder="Student Name" />
                                        </div>
                                        <div className="space-y-5">
                                            <label className="text-xs text-blue-500 font-black uppercase tracking-[0.4em] ml-4 block italic">College Roll Number</label>
                                            <input type="text" value={studentData.roll} onChange={e => setStudentData({...studentData, roll: e.target.value})} className="w-full input-field rounded-[2.5rem] p-10 text-2xl font-mono outline-none shadow-2xl uppercase" placeholder="Enter ID (e.g. 50)" />
                                        </div>
                                        <button onClick={startExam} className="w-full py-10 gradient-btn text-white font-black rounded-[4rem] text-sm mt-10 active:scale-95 italic">Authorize & Launch</button>
                                    </div>
                                </div>
                            </div>
                        )}

                        {/* EXAM VIEW */}
                        {view === 'exam' && (
                            <div className="animate-fade-in no-select w-full pb-20">
                                <div className="header-glass p-10 rounded-[3rem] mb-12 flex flex-wrap justify-between items-center gap-10 shadow-2xl relative">
                                    <div className="flex items-center gap-10">
                                        <div className="w-20 h-20 bg-blue-600 rounded-[2rem] flex items-center justify-center font-black text-5xl italic text-white shadow-xl">{examState.currentIndex + 1}</div>
                                        <div>
                                            <h3 className="font-black text-white text-4xl tracking-tighter uppercase italic leading-none">{studentData.name}</h3>
                                            <p className="text-[11px] text-slate-500 font-black tracking-[0.6em] uppercase mt-3 italic opacity-80">Roll: {studentData.roll} • Examination Module</p>
                                        </div>
                                    </div>
                                    <div className="flex items-center gap-20 text-center ml-auto">
                                        <div className="font-mono">
                                            <p className="text-[11px] text-slate-500 font-black mb-3 opacity-50 uppercase tracking-[0.4em]">Remaining</p>
                                            <span className={`text-6xl font-black tabular-nums drop-shadow-lg ${examState.timeLeft < 300 ? 'text-red-500 animate-pulse' : 'text-blue-500'}`}>{Math.floor(examState.timeLeft / 60)}:{(examState.timeLeft % 60).toString().padStart(2, '0')}</span>
                                        </div>
                                        <button onClick={() => submitExam()} className="px-14 py-7 bg-red-600 hover:bg-red-700 text-white rounded-[2.5rem] font-black uppercase text-xs tracking-widest shadow-xl transition-all italic">Commit Log</button>
                                    </div>
                                </div>

                                <div className="grid grid-cols-1 lg:grid-cols-4 gap-16">
                                    <div className="lg:col-span-3 space-y-16">
                                        <div className="readable-card p-12 md:p-24 rounded-[6rem] shadow-2xl min-h-[700px] flex flex-col border-t-blue-500/30">
                                            <div className="flex items-center gap-6 mb-16 border-b border-white/5 pb-10 text-left">
                                                <p className="text-blue-400 font-mono text-sm font-black tracking-[1em] uppercase italic underline decoration-blue-500 underline-offset-8 decoration-2">Question {examState.currentIndex + 1} / 25</p>
                                            </div>
                                            <h2 className="text-4xl md:text-7xl font-black leading-[1.1] mb-24 text-white italic tracking-tighter uppercase text-left">{examState.questions[examState.currentIndex]?.q}</h2>
                                            <div className="grid grid-cols-1 gap-8 mt-auto">
                                                {examState.questions[examState.currentIndex]?.options.map((opt, i) => (
                                                    <button key={i} onClick={() => setExamState({...examState, answers: {...examState.answers, [examState.currentIndex]: i}})} className={`w-full p-10 text-left rounded-[3.5rem] border-2 transition-all flex justify-between items-center group shadow-xl ${examState.answers[examState.currentIndex] === i ? 'bg-blue-600 border-blue-400 text-white scale-[1.03]' : 'bg-slate-900 border-white/5 text-slate-300 hover:border-blue-500/50 hover:bg-slate-800'}`}>
                                                        <span className="font-black text-3xl md:text-4xl tracking-tighter uppercase italic leading-none">{opt}</span>
                                                        <div className={`w-14 h-14 rounded-full border-4 flex items-center justify-center transition-all ${examState.answers[examState.currentIndex] === i ? 'border-white bg-blue-500 shadow-2xl' : 'border-slate-800 bg-slate-950 opacity-40'}`}>
                                                            {examState.answers[examState.currentIndex] === i && <div className="w-5 h-5 bg-white rounded-full shadow-[0_0_30px_rgba(255,255,255,0.9)]"></div>}
                                                        </div>
                                                    </button>
                                                ))}
                                            </div>
                                        </div>
                                        <div className="flex justify-between items-center px-16">
                                            <button disabled={examState.currentIndex === 0} onClick={() => setExamState({...examState, currentIndex: examState.currentIndex - 1})} className="px-16 py-8 bg-slate-900 text-white rounded-full flex items-center gap-10 font-black disabled:opacity-20 uppercase tracking-[1em] text-xs italic border border-white/5 shadow-2xl transition-all active:scale-95"><Icon name="chevron-left" size={32} /> Previous</button>
                                            <button disabled={examState.currentIndex === 24} onClick={() => setExamState({...examState, currentIndex: examState.currentIndex + 1})} className="px-16 py-8 bg-slate-900 text-white rounded-full flex items-center gap-10 font-black disabled:opacity-20 uppercase tracking-[1em] text-xs italic border border-white/5 shadow-2xl transition-all active:scale-95">Next <Icon name="chevron-right" size={32} /></button>
                                        </div>
                                    </div>

                                    <div className="lg:col-span-1 space-y-16 h-fit sticky top-48">
                                        <div className="readable-card p-12 rounded-[5rem] shadow-xl">
                                            <h4 className="font-black mb-16 flex items-center gap-8 text-slate-500 text-xs uppercase tracking-[1em] border-b border-white/10 pb-12 italic text-left"><Icon name="layout-grid" size={32} /> Matrix</h4>
                                            <div className="grid grid-cols-5 gap-6">
                                                {examState.questions.map((_, i) => {
                                                    const isSelected = examState.answers[i] !== undefined;
                                                    const isVisited = visitedIndices.has(i);
                                                    const isCurrent = examState.currentIndex === i;

                                                    let statusClass = "bg-slate-950 border-white/5 text-slate-700";
                                                    if (isSelected) statusClass = "bg-green-600 border-green-500 text-white shadow-lg shadow-green-500/20";
                                                    else if (isVisited && !isCurrent) statusClass = "bg-red-600 border-red-500 text-white shadow-lg shadow-red-500/20";

                                                    if (isCurrent) statusClass += " border-blue-400 text-blue-400 bg-blue-400/10 scale-125 z-10 shadow-blue-500/20";

                                                    return (
                                                        <button key={i} onClick={() => setExamState({...examState, currentIndex: i})} className={`w-full aspect-square rounded-[1.75rem] text-sm font-black border-4 transition-all flex items-center justify-center font-mono ${statusClass}`}>{i + 1}</button>
                                                    );
                                                })}
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        )}

                        {/* RESULT VIEW */}
                        {view === 'result' && (
                            <div className="animate-fade-in max-w-6xl mx-auto w-full pb-20 text-left">
                                <div className="readable-card p-16 md:p-32 rounded-[8rem] shadow-2xl relative overflow-hidden mb-24 border-t-blue-500/40">
                                    <div className="flex flex-wrap justify-between items-end mb-40 relative z-10 gap-16">
                                        <div>
                                            <h1 className="text-8xl md:text-[12rem] font-black text-white tracking-tighter uppercase italic leading-none mb-12 heading-font underline decoration-blue-600 decoration-[12px] underline-offset-[25px]">Ranking</h1>
                                            <p className="text-slate-400 font-black uppercase tracking-[1.2em] text-sm ml-8 border-l-8 border-blue-500 pl-16 italic opacity-70 uppercase">Real-time Global Ranking Feed • BCA Modasa</p>
                                        </div>
                                        <Icon name="trophy" size={180} className="text-yellow-500 drop-shadow-[0_0_80px_rgba(234,179,8,0.6)] animate-bounce" />
                                    </div>
                                    <div className="space-y-20 relative z-10">
                                        {results.length === 0 ? <p className="text-center py-40 opacity-10 font-black text-6xl uppercase tracking-[1em]">NO_DATA</p> :
                                         results.slice(0, 10).map((res, i) => (
                                            <div key={i} className="group border-b border-white/5 pb-16 last:border-none transition-all hover:bg-white/5 rounded-[3rem] p-10">
                                                <div className="flex justify-between items-center mb-10 px-12">
                                                    <div className="flex items-center gap-16">
                                                        <span className={`w-24 h-24 rounded-[2.5rem] flex items-center justify-center text-5xl font-black italic shadow-2xl ${i === 0 ? 'bg-yellow-500 text-black rotate-12 shadow-yellow-500/30' : i === 1 ? 'bg-slate-300 text-black -rotate-6' : i === 2 ? 'bg-amber-700 text-white rotate-6' : 'bg-slate-800 text-slate-500'}`}>{i+1}</span>
                                                        <span className="font-black text-5xl md:text-7xl text-slate-100 uppercase tracking-tighter italic leading-none italic group-hover:text-blue-500 transition-colors">{res.name}</span>
                                                    </div>
                                                    <span className="font-mono text-blue-500 text-5xl md:text-8xl font-black tracking-tighter tabular-nums drop-shadow-[-10px_10px_30px_rgba(59,130,246,0.3)]">{res.score}<span className="text-2xl opacity-20 uppercase ml-6 italic font-sans tracking-[0.3em]">VAL</span></span>
                                                </div>
                                                <div className="w-full bg-slate-950/80 h-3 rounded-full overflow-hidden border border-white/5 shadow-inner p-0.5">
                                                    <div className="h-full bg-gradient-to-r from-blue-700 via-blue-500 to-blue-400 rounded-full transition-all duration-1000 ease-in-out shadow-[0_0_30px_rgba(59,130,246,0.5)]" style={{ width: `${(res.score/25)*100}%` }}></div>
                                                </div>
                                            </div>
                                        ))}
                                    </div>
                                </div>
                            </div>
                        )}
                    </main>
                    
                    {/* FOOTER */}
                    <footer className="mt-auto border-t border-white/5 py-24 text-center bg-slate-950/80 backdrop-blur-md relative z-10">
                        <div className="max-w-6xl mx-auto px-6 text-center">
                            <p className="text-slate-500 text-[14px] italic mb-12 leading-relaxed tracking-[0.2em] uppercase font-bold opacity-60">From Logic to Target, Coding Digital India!</p>
                            <p className="text-slate-700 text-[12px] font-black uppercase tracking-[1.5em] italic">© 2025 BCA COLLEGE MODASA • Prof. Amit Raval</p>
                        </div>
                    </footer>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>